<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}LUCAR - Simracing{% endblock %}</title>
        <link rel="stylesheet" href="{{ asset('css/app.css') }}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        {% block stylesheets %}{% endblock %}
    </head>
    <body>
        {% include 'components/nav.html.twig' %}

        <main>
            {% block body %}{% endblock %}
        </main>

        <footer class="section bg-dark text-white">
            <div class="container">
                <div class="footer-content">
                    <div>Contact: 0102030405</div>
                    <div>Email: Lucar@mail.com</div>
                    <div>Copyright - tout droit réservé</div>
                </div>
            </div>
        </footer>

        {% block javascripts %}
        <script>
            // Intercepteur global pour les requêtes
            document.addEventListener('DOMContentLoaded', function() {
                const token = localStorage.getItem('token');
                if (token) {
                    const originalFetch = window.fetch;
                    window.fetch = function(url, options = {}) {
                        options.headers = options.headers || {};
                        options.headers['Authorization'] = `Bearer ${token}`;
                        options.credentials = 'include';
                        return originalFetch(url, options);
                    };
                }
            });
        </script>
        {% endblock %}
    </body>
</html>
