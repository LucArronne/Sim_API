<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}LUCAR - Simracing{% endblock %}</title>
        <link rel="stylesheet" href="{{ asset('css/app.css') }}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        {% block stylesheets %}
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
            <style>
                html, body {
                    height: 100%;
                    margin: 0;
                }

                body {
                    display: flex;
                    flex-direction: column;
                    min-height: 100vh;
                }

                main {
                    flex: 1 0 auto;
                }

                footer.site-footer {
                    flex-shrink: 0;
                    padding: 20px 0;
                    margin-top: auto;
                    background-color: #212529;
                    color: #fff;
                }

                footer.site-footer h5 {
                    color: #fff;
                    margin-bottom: 1rem;
                }

                footer.site-footer p {
                    color: #adb5bd;
                }

                footer.site-footer .social-links a {
                    color: #adb5bd;
                    margin-right: 1rem;
                    font-size: 1.2rem;
                    transition: color 0.3s ease;
                }

                footer.site-footer .social-links a:hover {
                    color: #fff;
                }
            </style>
        {% endblock %}
    </head>
    <body>
        {% include 'components/nav.html.twig' %}

        <main>
            {% block body %}{% endblock %}
        </main>

        <footer class="site-footer bg-dark">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <h5>À propos</h5>
                        <p>LUCAR Simracing - Votre partenaire de simulation automobile</p>
                    </div>
                    <div class="col-md-4">
                        <h5>Contact</h5>
                        <p>Email: contact@lucar-simracing.com</p>
                        <p>Tél: +33 (0)1 23 45 67 89</p>
                    </div>
                    <div class="col-md-4">
                        <h5>Suivez-nous</h5>
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col text-center">
                        <p>&copy; 2024 LUCAR Simracing. Tous droits réservés.</p>
                    </div>
                </div>
            </div>
        </footer>

        {% block javascripts %}
        <script>
            // Intercepteur global pour les requêtes
            document.addEventListener('DOMContentLoaded', function() {
                const token = localStorage.getItem('token');
                if (token) {
                    const originalFetch = window.fetch;
                    window.fetch = function(url, options = {}) {
                        options.headers = options.headers || {};
                        options.headers['Authorization'] = `Bearer ${token}`;
                        options.credentials = 'include';
                        return originalFetch(url, options);
                    };
                }
            });
        </script>
        {% endblock %}
    </body>
</html>
